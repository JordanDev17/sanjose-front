<div #card
  (click)="onCardClick()" class="news-card bg-white dark:bg-gray-800 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 relative overflow-hidden group border border-gray-100 dark:border-gray-700 cursor-pointer">

  <div class="relative overflow-hidden rounded-t-xl">
    <img [src]="news.imagen_destacada || 'https://via.placeholder.com/400x250?text=Imagen+no+disponible'"
      alt="{{ news.titulo }}" class="w-full h-52 object-cover transition-transform duration-500 group-hover:scale-110"
      (error)="onImageError($event)">
    <div
      class="absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent opacity-0 group-hover:opacity-80 transition-opacity duration-300 flex items-end p-5">
      <h3 class="text-white text-xl font-bold leading-tight">{{ news.titulo }}</h3>
    </div>
  </div>

  <div class="p-5 flex flex-col justify-between h-full">
    <div>
      <div class="flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-3">
        <span
          class="inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full dark:bg-blue-900 dark:text-blue-300 transform group-hover:scale-105 transition-transform duration-200"
          [attr.data-tooltip-target]="'category-tooltip-' + news.id">
          <ion-icon name="bookmark" class="mr-1"></ion-icon>
          {{ news.categoria }}
        </span>
        <div id="category-tooltip-{{news.id}}" role="tooltip"
          class="absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700">
          Categoría de la noticia
          <div class="tooltip-arrow" data-popper-arrow></div>
        </div>

        <span class="inline-flex items-center transform group-hover:scale-105 transition-transform duration-200"
          [attr.data-tooltip-target]="'date-tooltip-' + news.id">
          <ion-icon name="calendar-outline" class="mr-1"></ion-icon>
          {{ formatDate(news.fecha_publicacion) }}
        </span>
        <div id="date-tooltip-{{news.id}}" role="tooltip"
          class="absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700">
          Fecha de publicación
          <div class="tooltip-arrow" data-popper-arrow></div>
        </div>
      </div>

      <h3 class="block text-2xl font-extrabold text-gray-900 dark:text-white mb-3 leading-tight group-hover:opacity-0 transition-opacity duration-300">
        {{ news.titulo }}
      </h3>

      <p class="text-gray-700 dark:text-gray-300 text-base leading-relaxed mb-4 line-clamp-3">
        {{ news.resumen || (news.contenido.length > 150 ? news.contenido.substring(0, 150) + '...' : news.contenido) }}
      </p>
    </div>

    <div class="flex items-center justify-between mt-auto pt-4 border-t border-gray-200 dark:border-gray-700">
      <a (click)="onCardClick()" class="inline-flex items-center text-indigo-600 hover:text-indigo-800 dark:text-indigo-500 dark:hover:text-indigo-400 font-semibold transition-colors duration-200 group-hover:scale-105 cursor-pointer">
        Leer más
        <ion-icon name="arrow-forward-circle-outline" class="ml-2 text-xl"></ion-icon>
      </a>
      <span *ngIf="news.autor"
        class="text-sm text-gray-600 dark:text-gray-400 inline-flex items-center transform group-hover:scale-105 transition-transform duration-200"
        [attr.data-tooltip-target]="'author-tooltip-' + news.id">
        <ion-icon name="person-outline" class="mr-1"></ion-icon>
        {{ news.autor }}
      </span>
      <div id="author-tooltip-{{news.id}}" role="tooltip"
        class="absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700">
        Autor de la noticia
        <div class="tooltip-arrow" data-popper-arrow></div>
      </div>
    </div>
  </div>
</div>