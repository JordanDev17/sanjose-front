/* src/app/components/virtual-tour/virtual-tour.component.css */


/* 1. El host del componente Angular (<app-virtual-tour>) */
:host {
  display: block; /* IMPORTANTE: Permite que width y height funcionen */
  width: 100%;
  height: 100%; /* Toma el 100% de la altura de #tour-container */
  position: relative; /* Necesario si los hijos son 'absolute' */
}

/* 2. El contenedor principal del visor de Marzipano */
.marzipano-viewer-container {
  position: absolute; /* Esto permite que ocupe todo el espacio de su padre (:host) */
  top: 0;
  left: 0;
  width: 100%; /* Ocupa el 100% del ancho de :host */
  height: 100%; /* Ocupa el 100% de la altura de :host */
  overflow: hidden; /* Muy importante para el control de Marzipano */

  /* ESTOS ESTILOS DE DEPURACIÓN TE AYUDARÁN A VER DÓNDE ESTÁ EL PROBLEMA */
  /* background-color: rgba(255, 0, 0, 0.2); /* Rojo muy tenue para ver su área */
  /* border: 2px dashed red; */
}

/* 3. El div #pano donde Marzipano inyecta el canvas */
#pano {
  position: absolute; /* Ocupa todo el espacio de su padre (.marzipano-viewer-container) */
  top: 0;
  left: 0;
  width: 100%; /* Ocupa el 100% del ancho de .marzipano-viewer-container */
  height: 100%; /* Ocupa el 100% de la altura de .marzipano-viewer-container */
  overflow: hidden; /* Evita desbordamientos */

  /* ESTOS ESTILOS DE DEPURACIÓN TE AYUDARÁN A VER DÓNDE ESTÁ EL PROBLEMA */
  /* background-color: rgba(0, 0, 255, 0.2); /* Azul muy tenue para ver su área */
  /* border: 2px dashed blue; */
}

/* Por ejemplo, para tu titleBar, asegúrate de que tiene un z-index alto */
#titleBar {
    position: absolute;
    top: 0;
    left: 0;
    right: 40px;
    height: 40px;
    text-align: center;
    z-index: 10; /* Asegura que esté por encima del pano */
}

/* Considerar estilos específicos para móviles si se activan por alguna clase en el body.
   Si tu Angular no añade estas clases (`.mobile`), estas reglas no se aplicarán. */
.mobile #titleBar {
  height: 50px;
  right: 50px;
}

/* Ajustes para el espacio cuando el botón de pantalla completa está presente */
/* NOTA: `body.fullscreen-enabled` implica que la clase se aplica al `body`.
   Si tu aplicación controla el fullscreen de otra manera, estas reglas podrían no aplicarse
   o necesitarían un selector diferente (`.marzipano-viewer-container.fullscreen-enabled #titleBar`).
   Por ahora, las mantenemos como están. */
body.fullscreen-enabled #titleBar {
  right: 80px;
}
body.fullscreen-enabled.mobile #titleBar {
  right: 100px;
}

/* Ajustes para el espacio cuando hay múltiples escenas */
body.multiple-scenes #titleBar {
  left: 40px;
}
body.multiple-scenes.mobile #titleBar {
  left: 50px;
}

#titleBar .sceneName {
  width: 100%;
  height: 100%;
  line-height: 30px;
  padding: 5px;
  background-color: rgb(58,68,84); /* Color de fondo oscuro */
  background-color: rgba(58,68,84,0.8); /* Transparencia */
  overflow: hidden;
  text-overflow: ellipsis; /* Puntos suspensivos si el texto es muy largo */
  white-space: nowrap;
  -moz-user-select: text; /* Permite seleccionar el texto del título */
  -webkit-user-select: text;
  -ms-user-select: text;
  user-select: text;
}
.mobile #titleBar .sceneName {
  line-height: 40px;
}

/* --- FULLSCREEN TOGGLE (Botón de pantalla completa) --- */
#fullscreenToggle {
  display: none; /* Se oculta por defecto y se muestra con la clase `fullscreen-enabled` en el body */
  position: absolute;
  top: 0;
  right: 0;
  width: 40px;
  height: 40px;
  padding: 5px;
  background-color: rgb(103,115,131);
  background-color: rgba(103,115,131,0.8);
}
.mobile #fullscreenToggle {
  width: 50px;
  height: 50px;
}
body.fullscreen-enabled #fullscreenToggle {
  display: block; /* Se muestra solo cuando el body tiene la clase `fullscreen-enabled` */
}
#fullscreenToggle .icon {
  position: absolute;
  top: 5px;
  right: 5px;
  width: 30px;
  height: 30px;
}
.mobile #fullscreenToggle .icon {
  top: 10px;
  right: 10px;
}
#fullscreenToggle .icon.on { display: none; }
#fullscreenToggle .icon.off { display: block; }
#fullscreenToggle.enabled .icon.on { display: block; }
#fullscreenToggle.enabled .icon.off { display: none; }

/* --- AUTOROTATE TOGGLE (Botón de autorotación) --- */
#autorotateToggle {
  display: block; /* Se muestra por defecto */
  position: absolute;
  top: 0;
  right: 0;
  width: 40px;
  height: 40px;
  padding: 5px;
  background-color: rgb(103,115,131);
  background-color: rgba(103,115,131,0.8);
}
.mobile #autorotateToggle {
  width: 50px;
  height: 50px;
}
/* Si hay botón de fullscreen, el de autorotación se desplaza a la izquierda */
body.fullscreen-enabled #autorotateToggle {
  right: 40px;
}
body.fullscreen-enabled.mobile #autorotateToggle {
  right: 50px;
}
#autorotateToggle .icon {
  position: absolute;
  top: 5px;
  right: 5px;
  width: 30px;
  height: 30px;
}
.mobile #autorotateToggle .icon {
  top: 10px;
  right: 10px;
}
#autorotateToggle .icon.on { display: none; }
#autorotateToggle .icon.off { display: block; }
#autorotateToggle.enabled .icon.on { display: block; }
#autorotateToggle.enabled .icon.off { display: none; }


/* --- SCENE LIST TOGGLE (Botón para abrir la lista de escenas) --- */
#sceneListToggle {
  position: absolute;
  top: 0;
  left: 0;
  width: 40px;
  height: 40px;
  padding: 5px;
  background-color: rgb(103,115,131);
  background-color: rgba(103,115,131,0.8);
}
.mobile #sceneListToggle {
  width: 50px;
  height: 50px;
}
#sceneListToggle .text {
  position: absolute;
  top: 5px;
  left: 15px;
  width: 100%;
  line-height: 30px;
}
#sceneListToggle .icon {
  position: absolute;
  top: 5px;
  right: 5px;
  width: 30px;
  height: 30px;
}
.mobile #sceneListToggle .icon {
  top: 10px;
  right: 10px;
}
#sceneListToggle .icon.on { display: none; }
#sceneListToggle .icon.off { display: block; }
#sceneListToggle.enabled .icon.on { display: block; }
#sceneListToggle.enabled .icon.off { display: none; }


/* --- SCENE LIST (Lista de escenas) --- */
#sceneList {
  position: absolute;
  top: 0;
  left: -220px; /* Oculta la lista inicialmente */
  padding-top: 40px; /* Deja espacio para la barra de título/botones */
  width: 220px;
  max-height: 100%;
  overflow-x: hidden;
  overflow-y: auto; /* Permite desplazamiento vertical si hay muchas escenas */
  margin-left: 0;
  -webkit-transition: margin-left 0.5s ease-in-out;
  transition: margin-left 0.5s ease-in-out;
}
.mobile #sceneList {
  padding-top: 50px;
}
#sceneList .scenes {
  width: 100%;
  background-color: rgb(58,68,84);
  background-color: rgba(58,68,84,0.8);
}
.mobile #sceneList {
  width: 100%;
  height: 100%;
  left: -100%;
}
.mobile #sceneList.enabled {
  margin-left: 100%;
}
.mobile #sceneList .scenes {
  height: 100%;
}
#sceneList.enabled {
  margin-left: 220px; /* Desliza la lista a la vista */
}
#sceneList .scene {
  display: block;
  width: 100%;
  height: 30px;
}
.mobile #sceneList .scene {
  height: 40px;
}
#sceneList .scene .text {
  width: 100%;
  height: 100%;
  padding: 0 15px;
  line-height: 30px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.mobile #sceneList .scene .text {
  line-height: 40px;
}
.no-touch #sceneList .scene:hover {
  background-color: rgb(103,115,131);
  background-color: rgba(103,115,131,0.8);
}
#sceneList .scene.current {
  background-color: rgb(103,115,131);
  background-color: rgba(103,115,131,0.8);
}
/* Oculta la lista de escenas cuando solo hay una (para evitar un botón inútil) */
body.single-scene #sceneList, body.single-scene #sceneListToggle {
  display: none;
}


/* --- LINK HOTSPOT (Hotspots de navegación entre escenas) --- */
/* Son los círculos o íconos que te llevan a otra vista. */
.link-hotspot {
  width: 60px;
  height: 60px;
  margin-left: -30px; /* Centra el hotspot */
  margin-top: -30px; /* Centra el hotspot */
  opacity: 0.9;
  -webkit-transition: opacity 0.2s;
  transition: opacity 0.2s;
}
.no-touch .link-hotspot:hover { opacity: 1; }
.mobile .link-hotspot { width: 70px; height: 70px; }
.link-hotspot-icon { width: 100%; height: 100%; cursor: pointer; }

/* Tooltip del Link Hotspot */
.link-hotspot-tooltip {
  position: absolute;
  left: 100%;
  top: 14px;
  margin-left: 3px;
  font-size: 16px;
  max-width: 300px;
  padding: 8px 10px;
  border-radius: 5px;
  background-color: rgb(58,68,84);
  background-color: rgba(58,68,84,0.8);
  color: #fff;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  cursor: pointer;
  opacity: 0;
  -ms-transform: translateX(-8px);
  -webkit-transform: translateX(-8px);
  transform: translateX(-8px);
  -webkit-transition: -ms-transform 0.3s, -webkit-transform 0.3s, transform 0.3s, opacity 0.3s;
  transition: -ms-transform 0.3s, -webkit-transform 0.3s, transform 0.3s, opacity 0.3s;
}
.mobile .link-hotspot { top: 19px; }
.no-touch .link-hotspot:hover .link-hotspot-tooltip {
  opacity: 1;
  -ms-transform: translateX(0);
  -webkit-transform: translateX(0);
  transform: translateX(0);
}
.link-hotspot-tooltip { pointer-events: none; }
.no-touch .link-hotspot:hover .link-hotspot-tooltip { pointer-events: all; }
.tooltip-fallback .link-hotspot-tooltip { display: none; }
.no-touch .tooltip-fallback .link-hotspot:hover .link-hotspot-tooltip { display: block; }


/* --- INFO HOTSPOT (Hotspots de información) --- */
/* Son los íconos que abren un panel con texto. */
.info-hotspot {
  line-height: 1.2em;
  opacity: 0.9;
  -webkit-transition: opacity 0.2s 0.2s;
  transition: opacity 0.2s 0.2s;
}
.no-touch .info-hotspot:hover {
  opacity: 1;
  -webkit-transition: opacity 0.2s;
  transition: opacity 0.2s;
}
.info-hotspot.visible { opacity: 1; }

.info-hotspot .info-hotspot-header {
  width: 40px;
  height: 40px;
  border-radius: 20px;
  background-color: rgb(103,115,131);
  cursor: pointer;
  -webkit-transition: width 0.3s ease-in-out 0.5s, border-radius 0.3s ease-in-out 0.5s;
  transition: width 0.3s ease-in-out 0.5s, border-radius 0.3s ease-in-out 0.5s;
}
.mobile .info-hotspot .info-hotspot-header { width: 50px; height: 50px; border-radius: 25px; }
.desktop.no-touch .info-hotspot .info-hotspot-header:hover {
  width: 260px;
  border-radius: 5px;
  -webkit-transition: width 0.3s ease-in-out, border-radius 0.3s ease-in-out;
  transition: width 0.3s ease-in-out, border-radius 0.3s ease-in-out;
}
.desktop .info-hotspot.visible .info-hotspot-header,
.desktop.no-touch .info-hotspot.visible .info-hotspot-header:hover {
  width: 260px;
  border-radius: 5px;
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
  border-bottom-left-radius: 0;
  -webkit-transition: width 0.3s ease-in-out, border-radius 0.3s ease-in-out;
  transition: width 0.3s ease-in-out, border-radius 0.3s ease-in-out;
}

.info-hotspot .info-hotspot-icon-wrapper { width: 40px; height: 40px; }
.mobile .info-hotspot .info-hotspot-icon-wrapper { width: 50px; height: 50px; }
.info-hotspot .info-hotspot-icon { width: 90%; height: 90%; margin: 5%; }

.info-hotspot .info-hotspot-title-wrapper {
  position: absolute;
  left: 40px;
  top: 0;
  width: 0;
  height: 40px;
  padding: 0;
  overflow: hidden;
  -webkit-transition: width 0s 0.4s, padding 0s 0.4s;
  transition: width 0s 0.4s, padding 0s 0.4s;
}
.desktop .info-hotspot.visible .info-hotspot-title-wrapper,
.desktop.no-touch .info-hotspot .info-hotspot-header:hover .info-hotspot-title-wrapper {
  width: 220px;
  padding: 0 5px;
  -webkit-transition: width 0s 0.4s, padding 0s 0.4s;
  transition: width 0s 0.4s, padding 0s 0.4s;
}
.info-hotspot .info-hotspot-title-wrapper:before { content: ''; display: inline-block; vertical-align: middle; height: 100%; }
.info-hotspot .info-hotspot-title {
  display: inline-block;
  vertical-align: middle;
  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

.info-hotspot .info-hotspot-close-wrapper {
  position: absolute;
  left: 260px;
  top: 0;
  height: 40px;
  width: 40px;
  border-top-right-radius: 5px;
  background-color: rgb(78,88,104);
  visibility: hidden;
  -ms-transform: perspective(200px) rotateY(90deg);
  -webkit-transform: perspective(200px) rotateY(90deg);
  transform: perspective(200px) rotateY(90deg);
  -ms-transform-origin: 0 50% 0;
  -webkit-transform-origin: 0 50% 0;
  transform-origin: 0 50% 0;
  -webkit-transition: -ms-transform 0.3s 0.3s, -webkit-transform 0.3s 0.3s, transform 0.3s 0.3s, visibility 0s 0.6s;
  transition: -ms-transform 0.3s 0.3s, -webkit-transform 0.3s 0.3s, transform 0.3s 0.3s, visibility 0s 0.6s;
}
.desktop .info-hotspot.visible .info-hotspot-close-wrapper {
  visibility: visible;
  -ms-transform: perspective(200px) rotateY(0deg);
  -webkit-transform: perspective(200px) rotateY(0deg);
  transform: perspective(200px) rotateY(0deg);
  -webkit-transition: -ms-transform 0.3s, -webkit-transform 0.3s, transform 0.3s, visibility 0s 0s;
  transition: -ms-transform 0.3s, -webkit-transform 0.3s, transform 0.3s, visibility 0s 0s;
}
.info-hotspot .info-hotspot-close-icon { width: 70%; height: 70%; margin: 15%; }

.info-hotspot .info-hotspot-text {
  position: absolute;
  width: 300px;
  height: auto;
  max-height: 200px;
  top: 40px;
  left: 0;
  padding: 10px;
  background-color: rgb(58,68,84);
  border-bottom-right-radius: 5px;
  border-bottom-left-radius: 5px;
  overflow-y: auto;
  visibility: hidden;
  -ms-transform: perspective(200px) rotateX(-89.999deg);
  -webkit-transform: perspective(200px) rotateX(-89.999deg);
  transform: perspective(200px) rotateX(-89.999deg);
  -ms-transform-origin: 50% 0 0;
  -webkit-transform-origin: 50% 0 0;
  transform-origin: 50% 0 0;
  -webkit-transition: -ms-transform 0.3s, -webkit-transform 0.3s, transform 0.3s, visibility 0s 0.3s;
  transition: -ms-transform 0.3s, -webkit-transform 0.3s, transform 0.3s, visibility 0s 0.3s;
  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
  user-select: text;
}
.desktop .info-hotspot.visible .info-hotspot-text {
  visibility: visible;
  -ms-transform: perspective(200px) rotateX(0deg);
  -webkit-transform: perspective(200px) rotateX(0deg);
  transform: perspective(200px) rotateX(0deg);
  -webkit-transition: -ms-transform 0.3s 0.3s, -webkit-transform 0.3s 0.3s, transform 0.3s 0.3s, visibility 0s 0s;
  transition: -ms-transform 0.3s 0.3s, -webkit-transform 0.3s 0.3s, transform 0.3s 0.3s, visibility 0s 0s;
}

/* --- INFO HOTSPOT MODAL (Ventana emergente de información) --- */
.desktop .info-hotspot-modal { display: none; }
.info-hotspot-modal {
  top: 0;
  left: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: 11000 !important; /* Muy alto para asegurar que esté sobre todo */
  background-color: rgba(0,0,0,.5);
  line-height: 1.2em;
  opacity: 0;
  visibility: hidden;
  -webkit-transition: opacity 0.2s ease-in-out 0.5s, visibility 0s 0.7s;
  transition: opacity 0.2s ease-in-out 0.5s, visibility 0s 0.7s;
}
.info-hotspot-modal.visible {
  opacity: 1;
  visibility: visible;
  -webkit-transition: opacity 0.2s ease-in-out, visibility 0s 0s;
  transition: opacity 0.2s ease-in-out, visibility 0s 0s;
}

.info-hotspot-modal .info-hotspot-header {
  position: absolute;
  top: 60px;
  left: 10px;
  right: 10px;
  width: auto;
  height: 50px;
  background-color: rgb(103,115,131);
  background-color: rgba(103,115,131,0.8);
  opacity: 0;
  -webkit-transition: opacity 0.3s ease-in-out 0.2s;
  transition: opacity 0.3s ease-in-out 0.2s;
}
.info-hotspot-modal.visible .info-hotspot-header { opacity: 1; -webkit-transition: opacity 0.3s ease-in-out 0.2s; transition: opacity 0.3s ease-in-out 0.2s; }
.info-hotspot-modal .info-hotspot-icon-wrapper { width: 50px; height: 50px; }
.info-hotspot-modal .info-hotspot-icon { width: 90%; height: 90%; margin: 5%; }
.info-hotspot-modal .info-hotspot-title-wrapper {
  position: absolute;
  top: 0;
  left: 50px;
  right: 50px;
  width: auto;
  height: 50px;
  padding: 0 10px;
}
.info-hotspot-modal .info-hotspot-title-wrapper:before { content: ''; display: inline-block; vertical-align: middle; height: 100%; }
.info-hotspot-modal .info-hotspot-title {
  display: inline-block;
  vertical-align: middle;
  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
  user-select: text;
}
.info-hotspot-modal .info-hotspot-close-wrapper {
  position: absolute;
  top: 0;
  right: 0;
  width: 50px;
  height: 50px;
  background-color: rgb(78,88,104);
  background-color: rgba(78,88,104,0.8);
  cursor: pointer;
}
.info-hotspot-modal .info-hotspot-close-icon { width: 70%; height: 70%; margin: 15%; }
.info-hotspot-modal .info-hotspot-text {
  position: absolute;
  top: 110px;
  bottom: 10px;
  left: 10px;
  right: 10px;
  padding: 10px;
  background-color: rgb(58,68,84);
  background-color: rgba(58,68,84,0.8);
  overflow-y: auto;
  opacity: 0;
  -webkit-transition: opacity 0.3s ease-in-out;
  transition: opacity 0.3s ease-in-out;
  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
  user-select: text;
}
.info-hotspot-modal.visible .info-hotspot-text {
  opacity: 1;
  -webkit-transition: opacity 0.3s ease-in-out 0.4s;
  transition: opacity 0.3s ease-in-out 0.4s;
}

/* --- VIEW CONTROL BUTTONS (Botones de control de vista) --- */
/* Son los botones de flecha o dirección que aparecen en la parte inferior. */
.viewControlButton {
  display: none; /* Se ocultan por defecto */
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 40px;
  height: 40px;
  padding: 5px;
  background-color: rgb(103,115,131);
  background-color: rgba(103,115,131,0.8);
}
body.view-control-buttons .viewControlButton { display: block; }

/* Oculta los controles si el ancho de la pantalla es muy pequeño */
@media (max-width: 600px) {
  body.view-control-buttons .viewControlButton { display: none; }
}

.viewControlButton .icon {
  position: absolute;
  top: 5px;
  right: 5px;
  width: 30px;
  height: 30px;
}
/* Posicionamiento específico de cada botón de control de vista */
.viewControlButton-1 { margin-left: -145px; }
.viewControlButton-2 { margin-left: -95px; }
.viewControlButton-3 { margin-left: -45px; }
.viewControlButton-4 { margin-left: 5px; }
.viewControlButton-5 { margin-left: 55px; }
.viewControlButton-6 { margin-left: 105px; }